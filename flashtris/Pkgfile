# $Id: $
# Description:  Tetris like game
# URL:          http://flashtris.flashtux.org/
# Maintainer:   Jose V Beneyto, joberui at ei dot upv dot es
# Packager:     Jose V Beneyto, joberui at ei dot upv dot es
# Depends on:   x11

name=flashtris
version=0.30
release=1
source=(http://flashtris.flashtux.org/download/ftris-src-$version.tar.gz \
	http://flashtris.flashtux.org/download/ftris-data-$version.tar.gz)

build() {
	cp makefile Makefile
	make clean
	gcc -o gendate gendate.c
	./gendate > date.h
	echo "#undef DATA_EXE" > data_exe.h
	make dep
	cd add_exe
	cp makefile Makefile
	gcc -O3 -Wall -s -o add_exe add_exe.c
	cd ..
	add_exe/add_exe exe -c -a -v
	gcc -c -o data_exe.o data_exe.c
	gcc -o flashtris -I/usr/X11R6/include/X11 -L/usr/X11R6/lib \
		 -Wall -s -pipe -DLINUX *.o -lvga module/module.a -lm
	add_exe/add_exe exe -v
	install -d $PKG/usr/share/$name
	mv {gfx,music} $PKG/usr/share/$name
}
