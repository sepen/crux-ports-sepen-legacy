# Description:  runs svnserve as a standalone daemon process.
# URL:          
# Maintainer:   Jose V Beneyto, sepen at crux dot nu
# Packager:     Jose V Beneyto, sepen at crux dot nu
# Depends on:   subversion

name=svndaemon
version=1
release=1
source=()

build() {
	install -d $PKG/etc/rc.d
	cat >> $PKG/etc/rc.d/$name << EOF
#!/bin/sh
#
# /etc/rc.d/svndaemon: start/stop svnserve daemon
#

SVN_REPO=/svn/repo

case \$1 in
	start)	
		/usr/bin/svnserve --daemon --threads --root \$SVN_REPO
		;;
	stop)	
		killall -q /usr/bin/svnserve
		;;
	restart)
		\$0 stop
		sleep 2
		\$0 start
		;;
	*)
		echo "usage: \$0 [start|stop|restart]"
		;;
esac
	
# End of file
EOF
	chmod 755 $PKG/etc/rc.d/$name
}
